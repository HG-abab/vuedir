import{h as A}from"./chunks/theme.DESlTpl4.js";import{d as q,C as f,c as E,o as l,ab as r,k as u,b as D,w as v,a as C,_ as c,p as x,F as o,j as s,t,aB as m,aD as _,e as w,B,ad as g,n as b,G as F}from"./chunks/framework.BY7ne7pH.js";import{A as T}from"./chunks/ApiTable.CDruYdhD.js";/* empty css                                                                        */const S={class:"drag_box"},I=q({__name:"BasicDemo",setup(k){return(i,p)=>{const a=f("a-button");return l(),E("div",S,[r((l(),D(a,{type:"primary",shape:"round"},{default:v(()=>p[0]||(p[0]=[C("Drag me")])),_:1})),[[u(A)]]),r((l(),D(a,{type:"primary",shape:"round",style:{transform:"translate(120%, 120%)"}},{default:v(()=>p[1]||(p[1]=[C(" Drag me ")])),_:1})),[[u(A)]])])}}}),V=c(I,[["__scopeId","data-v-00409f89"]]),P=q({__name:"WithRange",setup(k){const i=x(null);return(p,a)=>{const h=f("a-button");return l(),E("div",{class:"drag_box",ref_key:"containerRef",ref:i},[r((l(),D(h,{type:"primary",shape:"round"},{default:v(()=>a[0]||(a[0]=[C(" Drag me ")])),_:1})),[[u(A),{range:i.value}]])],512)}}}),z=c(P,[["__scopeId","data-v-a6ff0b54"]]),N={class:"info_box"},$=q({__name:"WithEvents",setup(k){const i=x(null),p=x({startNum:0,endNum:0,dragNum:0});function a(){p.value.startNum+=1}function h(){p.value.dragNum+=1}function e(){p.value.endNum+=1}return(d,n)=>{const y=f("a-button");return l(),E(o,null,[s("div",{class:"drag_box",ref_key:"containerRef",ref:i},[r((l(),D(y,{type:"primary",shape:"round"},{default:v(()=>n[0]||(n[0]=[C(" Drag me ")])),_:1})),[[u(A),{range:i.value,startDrag:a,onDrag:{event:h,throttle:100},endDrag:e}]])],512),s("div",N,[s("p",null,"startNum: "+t(p.value.startNum),1),s("p",null,"dragNum: "+t(p.value.dragNum),1),s("p",null,"endNum: "+t(p.value.endNum),1)])],64)}}}),H=c($,[["__scopeId","data-v-05daeb80"]]),M={name:"BasicDrag",data(){return{axisOption:"both",boundsOption:"parent"}},methods:{resetPosition(){const k=this.$refs.dragElement,i=this.$refs.playgroundRef;if(k&&i){k.style.position="absolute";const p=i.getBoundingClientRect(),a=k.getBoundingClientRect(),h=(p.width-a.width)/2,e=(p.height-a.height)/2;k.style.left=`${h}px`,k.style.top=`${e}px`,k.style.transform="",k.style.margin="0"}},onStartDrag(){const k=this.$refs.dragElement;k&&(k.style.position="absolute")}},mounted(){this.$nextTick(()=>{setTimeout(()=>{this.resetPosition()},100)})},watch:{boundsOption(){this.$nextTick(()=>{setTimeout(()=>{this.resetPosition()},50)})}}},R={class:"basic-drag-container"},L={class:"drag-options"},O={class:"option-group"},j={class:"option-group"},J={class:"drag-playground",ref:"playgroundRef"},U={class:"drag-element",ref:"dragElement"},W={class:"drag-content"},G={class:"drag-info"},K={class:"controls"};function Q(k,i,p,a,h,e){const d=m("drag");return l(),E("div",R,[i[9]||(i[9]=s("h3",null,"基础拖拽增强演示",-1)),s("div",L,[s("div",O,[i[4]||(i[4]=s("label",null,"拖拽方向限制:",-1)),r(s("select",{"onUpdate:modelValue":i[0]||(i[0]=n=>h.axisOption=n)},i[3]||(i[3]=[s("option",{value:"both"},"两个方向 (x和y)",-1),s("option",{value:"x"},"仅水平方向 (x)",-1),s("option",{value:"y"},"仅垂直方向 (y)",-1)]),512),[[_,h.axisOption]])]),s("div",j,[i[6]||(i[6]=s("label",null,"边界限制:",-1)),r(s("select",{"onUpdate:modelValue":i[1]||(i[1]=n=>h.boundsOption=n)},i[5]||(i[5]=[s("option",{value:"none"},"无限制",-1),s("option",{value:"parent"},"父容器内",-1)]),512),[[_,h.boundsOption]])])]),s("div",J,[r((l(),E("div",U,[s("div",W,[i[8]||(i[8]=s("div",{class:"drag-title"},"拖动我",-1)),s("div",G,[C(t(h.axisOption==="both"?"可任意方向拖动":h.axisOption==="x"?"只能水平拖动":"只能垂直拖动")+" ",1),i[7]||(i[7]=s("br",null,null,-1)),C(" "+t(h.boundsOption==="parent"?"限制在父容器内":"无边界限制"),1)])])])),[[d,{axis:h.axisOption,bounds:h.boundsOption==="parent"?"parent":null,startDrag:e.onStartDrag}]])],512),s("div",K,[s("button",{onClick:i[2]||(i[2]=(...n)=>e.resetPosition&&e.resetPosition(...n))},"重置位置")])])}const X=c(M,[["render",Q],["__scopeId","data-v-ab82c086"]]),Y={name:"ListSort",data(){return{originalItems:[{id:1,text:"项目 1"},{id:2,text:"项目 2"},{id:3,text:"项目 3"},{id:4,text:"项目 4"},{id:5,text:"项目 5"}],items:[],lastSortInfo:"无",showDebug:!1}},created(){this.resetItems()},methods:{handleSort({oldIndex:k,newIndex:i}){if(console.log(`排序: 从 ${k} 到 ${i}`),this.lastSortInfo=`从位置 ${k+1} 到位置 ${i+1}`,k>=0&&i>=0&&k<this.items.length&&i<=this.items.length){const p=this.items.splice(k,1)[0];this.items.splice(i,0,p),console.log("排序后的数据:",this.items.map(a=>a.text))}else console.warn("排序索引超出范围:",k,i,this.items.length)},resetItems(){this.items=JSON.parse(JSON.stringify(this.originalItems)),this.lastSortInfo="无"},toggleDebug(){this.showDebug=!this.showDebug}}},Z={class:"list-container"},ss={key:0,class:"debug-info"},is={class:"sort-list"},as={class:"item-content"},ns={class:"item-number"},hs={class:"item-text"},ks={class:"result"},ls={class:"order-info"},ps={class:"controls"};function ts(k,i,p,a,h,e){const d=m("drag");return l(),E("div",Z,[i[3]||(i[3]=s("h3",null,"可排序列表",-1)),i[4]||(i[4]=s("div",{class:"instruction"},"拖动列表项可以重新排序",-1)),h.showDebug?(l(),E("div",ss,[s("p",null,"最后一次排序: "+t(h.lastSortInfo),1),s("p",null,"当前数据顺序: "+t(h.items.map(n=>n.text).join(", ")),1)])):w("",!0),s("ul",is,[(l(!0),E(o,null,B(h.items,(n,y)=>r((l(),E("li",{key:n.id,class:"list-item"},[s("div",as,[s("span",ns,t(y+1),1),s("span",hs,t(n.text),1)])])),[[d,{isList:!0,onSort:e.handleSort}]])),128))]),s("div",ks,[i[2]||(i[2]=s("h4",null,"当前排序:",-1)),s("div",ls,t(h.items.map(n=>n.text).join(" → ")),1),s("div",ps,[s("button",{class:"reset-btn",onClick:i[0]||(i[0]=(...n)=>e.resetItems&&e.resetItems(...n))},"重置顺序"),s("button",{class:"debug-btn",onClick:i[1]||(i[1]=(...n)=>e.toggleDebug&&e.toggleDebug(...n))},t(h.showDebug?"隐藏调试":"显示调试"),1)])])])}const Es=c(Y,[["render",ts],["__scopeId","data-v-ba1ec897"]]),es={name:"DragHandle"},rs={class:"handle-demo-container"},ds={class:"cards-container"},gs={class:"card"},ys={class:"card"},Fs={class:"card"};function Cs(k,i,p,a,h,e){const d=m("drag");return l(),E("div",rs,[i[3]||(i[3]=s("h3",null,"拖拽把手示例",-1)),s("div",ds,[r((l(),E("div",gs,i[0]||(i[0]=[s("div",{class:"card-handle"},[s("svg",{class:"handle-icon",viewBox:"0 0 24 24"},[s("path",{d:"M8,18h8v-2H8V18z M8,14h8v-2H8V14z M8,10h8V8H8V10z M4,22V2h16v20H4z"})])],-1),s("div",{class:"card-content"},[s("h4",null,"拖拽把手示例"),s("p",null,"点击左侧图标拖动整张卡片。点击此文本区域不会触发拖动。")],-1)]))),[[d,{handle:".card-handle"}]]),r((l(),E("div",ys,i[1]||(i[1]=[g("",2)]))),[[d,{handle:".card-header"}]]),r((l(),E("div",Fs,i[2]||(i[2]=[s("div",{class:"card-content full-width"},[s("h4",null,"标准拖拽（无把手）"),s("p",null,"对照组：点击卡片的任何位置均可拖动整个卡片。")],-1)]))),[[d]])]),i[4]||(i[4]=s("div",{class:"info-panel"},[s("p",null,[C("使用 "),s("code",null,"handle"),C(" 选项可以指定拖拽把手元素，只有当用户与该元素交互时才能触发拖拽。")]),s("pre",null,[s("code",null,`v-drag="{ handle: '.card-handle' }"`)])],-1))])}const cs=c(es,[["render",Cs],["__scopeId","data-v-e4ac5f7a"]]),os={name:"TaskBoard",data(){return{priorityLabels:{high:"高",medium:"中",low:"低"},todoTasks:[{id:101,title:"设计登录页面",description:"为新应用设计登录界面和注册表单",priority:"high"},{id:102,title:"实现数据验证",description:"对所有用户输入添加表单验证功能",priority:"medium"},{id:103,title:"编写单元测试",description:"为认证模块编写单元测试",priority:"low"}],inProgressTasks:[{id:201,title:"重构API模块",description:"使用新的请求库重构API请求模块",priority:"medium"},{id:202,title:"优化图片加载",description:"添加图片懒加载和渐进式加载功能",priority:"high"}],doneTasks:[{id:301,title:"修复导航栏bug",description:"解决移动端导航栏折叠问题",priority:"high"},{id:302,title:"更新依赖包",description:"更新所有npm包到最新版本",priority:"low"},{id:303,title:"添加深色模式",description:"实现应用的深色模式切换功能",priority:"medium"}]}},methods:{handleSort({oldIndex:k,newIndex:i},p){const a=this[`${p}Tasks`];if(k!==i&&k>=0&&i>=0&&k<a.length&&i<=a.length){const[h]=a.splice(k,1);a.splice(i,0,h),this.$forceUpdate()}}}},Bs={class:"task-board-container"},As={class:"board-columns"},us={class:"board-column"},Ds={class:"task-list"},vs={class:"task-content"},ms={class:"task-title"},bs={class:"task-description"},xs={class:"task-meta"},qs={class:"task-id"},fs={class:"board-column"},_s={class:"task-list"},ws={class:"task-content"},Ts={class:"task-title"},Ss={class:"task-description"},Is={class:"task-meta"},Vs={class:"task-id"},Ps={class:"board-column"},zs={class:"task-list"},Ns={class:"task-content"},$s={class:"task-title"},Hs={class:"task-description"},Ms={class:"task-meta"},Rs={class:"task-id"};function Ls(k,i,p,a,h,e){const d=m("drag");return l(),E("div",Bs,[i[6]||(i[6]=s("h3",null,"任务看板（综合示例）",-1)),s("div",As,[s("div",us,[i[1]||(i[1]=s("div",{class:"column-header"},"待办任务",-1)),s("ul",Ds,[(l(!0),E(o,null,B(h.todoTasks,n=>r((l(),E("li",{key:n.id,class:"task-card"},[i[0]||(i[0]=s("div",{class:"task-handle"},[s("svg",{class:"handle-icon",viewBox:"0 0 24 24"},[s("path",{d:"M3,15h18v-2H3V15z M3,19h18v-2H3V19z M3,11h18V9H3V11z M3,5v2h18V5H3z"})])],-1)),s("div",vs,[s("div",ms,t(n.title),1),s("div",bs,t(n.description),1),s("div",xs,[s("span",{class:b(["priority","priority-"+n.priority])},t(h.priorityLabels[n.priority]),3),s("span",qs,"#"+t(n.id),1)])])])),[[d,{isList:!0,handle:".task-handle",onSort:y=>e.handleSort("todo",y)}]])),128))])]),s("div",fs,[i[3]||(i[3]=s("div",{class:"column-header"},"进行中",-1)),s("ul",_s,[(l(!0),E(o,null,B(h.inProgressTasks,n=>r((l(),E("li",{key:n.id,class:"task-card"},[i[2]||(i[2]=s("div",{class:"task-handle"},[s("svg",{class:"handle-icon",viewBox:"0 0 24 24"},[s("path",{d:"M3,15h18v-2H3V15z M3,19h18v-2H3V19z M3,11h18V9H3V11z M3,5v2h18V5H3z"})])],-1)),s("div",ws,[s("div",Ts,t(n.title),1),s("div",Ss,t(n.description),1),s("div",Is,[s("span",{class:b(["priority","priority-"+n.priority])},t(h.priorityLabels[n.priority]),3),s("span",Vs,"#"+t(n.id),1)])])])),[[d,{isList:!0,handle:".task-handle",onSort:y=>e.handleSort("inProgress",y)}]])),128))])]),s("div",Ps,[i[5]||(i[5]=s("div",{class:"column-header"},"已完成",-1)),s("ul",zs,[(l(!0),E(o,null,B(h.doneTasks,n=>r((l(),E("li",{key:n.id,class:"task-card"},[i[4]||(i[4]=s("div",{class:"task-handle"},[s("svg",{class:"handle-icon",viewBox:"0 0 24 24"},[s("path",{d:"M3,15h18v-2H3V15z M3,19h18v-2H3V19z M3,11h18V9H3V11z M3,5v2h18V5H3z"})])],-1)),s("div",Ns,[s("div",$s,t(n.title),1),s("div",Hs,t(n.description),1),s("div",Ms,[s("span",{class:b(["priority","priority-"+n.priority])},t(h.priorityLabels[n.priority]),3),s("span",Rs,"#"+t(n.id),1)])])])),[[d,{isList:!0,handle:".task-handle",onSort:y=>e.handleSort("done",y)}]])),128))])])]),i[7]||(i[7]=s("div",{class:"feature-description"},[s("h4",null,"功能说明"),s("ul",null,[s("li",null,"通过左侧拖拽把手可以重新排序每一列中的任务卡片"),s("li",null,"仅点击卡片左侧带有线条图标的区域才能拖动卡片"),s("li",null,"每列内的任务可以独立排序"),s("li",null,"实现了重排时的视觉反馈和平滑动画")]),s("p",null,"此示例展示了 v-drag 指令的列表排序和拖拽把手功能的结合使用。")],-1))])}const Os=c(os,[["render",Ls],["__scopeId","data-v-af373093"]]),Ks=JSON.parse('{"title":"v-drag","description":"","frontmatter":{},"headers":[],"relativePath":"directives/drag.md","filePath":"directives/drag.md","lastUpdated":1741142902000}'),js={name:"directives/drag.md"},Qs=Object.assign(js,{setup(k){const i=[{name:"range",type:"Ref<HTMLElement>",default:"null",description:"可拖动的范围，其值应该是一个ref引用，如果不设置则默认为整个页面。",required:!1},{name:"startDrag",type:"Function",default:"null",description:"拖拽开始时触发的回掉函数",required:!1},{name:"onDrag",type:"Object<event: Function, throttle?: Number>",default:"null",description:"拖拽中触发的回掉函数",required:!1},{name:"endDrag",type:"Function",default:"null",description:"拖拽结束时触发的回掉函数",required:!1},{name:"isList",type:"Boolean",default:"false",description:"是否启用列表拖拽排序功能",required:!1},{name:"onSort",type:"Function",default:"null",description:"列表排序完成时的回调函数，接收 oldIndex 和 newIndex 参数",required:!1},{name:"handle",type:"String",default:"null",description:"拖拽把手的CSS选择器，指定后只有点击该元素才能触发拖拽",required:!1},{name:"axis",type:"String",default:"both",description:"限制拖拽方向，可选值为 'x'、'y'、'both'",required:!1},{name:"bounds",type:"String|HTMLElement",default:"null",description:"限制拖拽边界，可设置为 'parent' 或一个HTML元素",required:!1}];return(p,a)=>(l(),E("div",null,[a[0]||(a[0]=g("",5)),F(V),a[1]||(a[1]=g("",3)),F(z),a[2]||(a[2]=g("",3)),F(H),a[3]||(a[3]=g("",5)),F(X),a[4]||(a[4]=g("",3)),F(Es),a[5]||(a[5]=g("",3)),F(cs),a[6]||(a[6]=g("",3)),F(Os),a[7]||(a[7]=g("",7)),F(T,{data:i}),a[8]||(a[8]=g("",2))]))}});export{Ks as __pageData,Qs as default};
